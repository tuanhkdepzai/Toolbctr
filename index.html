<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>BACCARAT AI MODEL PRO 2026</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
:root{
 --p:#2196f3;
 --b:#e53935;
 --t:#4caf50;
 --bg:rgba(10,15,30,.96);
 --neon:#00ffff;
}
body{margin:0;font-family:Segoe UI;background:#000;overflow:hidden}

/* GAME */
#game-frame{
 position:fixed;
 inset:0;
 width:100%;
 height:100%;
 border:none;
 z-index:1;
}

/* BUBBLE */
#bubble{
 position:fixed;
 bottom:20px;right:20px;
 width:60px;height:60px;
 border-radius:50%;
 background:radial-gradient(circle,#00f2fe,#4facfe);
 display:flex;align-items:center;justify-content:center;
 font-weight:bold;cursor:pointer;color:#fff;
 box-shadow:0 0 15px #0ff;
 z-index:9999;
}

/* PANEL */
#panel{
 display:none;
 position:fixed;
 bottom:90px;right:15px;
 width:380px;
 background:var(--bg);
 border:2px solid var(--neon);
 border-radius:18px;
 padding:12px;
 backdrop-filter:blur(15px);
 z-index:10000;
 color:#fff;
}

.display{text-align:center}
#predict{font-size:20px;font-weight:900}
#circle{
 width:55px;height:55px;border-radius:50%;
 border:3px solid var(--neon);
 margin:6px auto;
 display:flex;align-items:center;justify-content:center;
 font-size:18px;font-weight:bold;
}

.stat{font-size:11px;margin-top:4px}

/* EFFECT */
@keyframes flash{
 0%{transform:scale(1)}
 50%{transform:scale(1.3)}
 100%{transform:scale(1)}
}
.flash{animation:flash .4s ease-in-out 3}

/* BOARD */
.board{
 display:grid;
 grid-template-columns:repeat(12,1fr);
 gap:3px;
 background:#000;
 padding:6px;
 border-radius:8px;
 margin:5px 0;
}
.cell{
 aspect-ratio:1/1;
 border-radius:50%;
 background:#222;
 display:flex;
 align-items:center;
 justify-content:center;
 font-size:9px;
}
.P{background:var(--p)}
.B{background:var(--b)}
.T{background:var(--t)}

.row{display:flex;gap:5px;margin-bottom:5px}
button{
 flex:1;height:32px;border:none;border-radius:6px;
 font-size:11px;font-weight:bold;color:#fff;cursor:pointer
}
.btn-p{background:var(--p)}
.btn-b{background:var(--b)}
.btn-t{background:var(--t)}
.btn-run{background:#ff9800}
.btn-del{background:#9c27b0}
.btn-reset{background:#555}

.heat{height:6px;background:#222;border-radius:6px;display:flex}
#hP{background:var(--p);width:50%}
#hB{background:var(--b);width:50%}
</style>
</head>
<body>

<iframe id="game-frame" src="https://www.nk88.day/m/home?affiliateCode=daily1"></iframe>

<div id="bubble" onclick="toggle()">AI</div>

<div id="panel">

<div class="display">
 <div id="predict">STANDBY...</div>
 <div id="circle">?</div>
 <div class="stat" id="info"></div>
 <div class="stat" id="winrate"></div>
</div>

<div class="board" id="board"></div>

<div class="row">
 <button class="btn-p" onclick="add('P')">P</button>
 <button class="btn-b" onclick="add('B')">B</button>
 <button class="btn-t" onclick="add('T')">T</button>
</div>

<div class="row">
 <button class="btn-run" onclick="runAI()">DỰ ĐOÁN</button>
 <button class="btn-del" onclick="deleteLast()">XOÁ</button>
 <button class="btn-reset" onclick="resetAll()">RESET</button>
</div>

<div class="heat">
 <div id="hP"></div>
 <div id="hB"></div>
</div>

</div>

<script>

/* AI MODEL PRO (Học chuỗi + pattern + xu hướng) */

const COLS=12,ROWS=6;

let grid=[];
let history=[];
let memory=JSON.parse(localStorage.getItem("memory")||'{"P":1,"B":1}');
let stats=JSON.parse(localStorage.getItem("stats")||'{"win":0,"total":0}');
let col=0,row=0,last=null,lastPrediction=null;

/* 50 pattern chuẩn */
const PATTERNS=[
"BBBB","PPPP","BPBP","PBPB","BBPP","PPBB","BBPBB","PPBPP",
"BPPBP","PBBPB","BBPB","PPBP","BPBB","PBPP","BPP","PBB",
"BBBBP","PPPPB","BPBPB","PBPBP","BBPBP","PPBPB","BPBBP",
"PBPPB","BBBBPP","PPPPBB","BPBPBP","PBPBPB","BBPPBB","PPBBPP",
"BBPBBP","PPBPPB","BPPBPB","PBBPBP","BBBBPB","PPPPBP",
"BPBBPB","PBPPBP","BBPBPP","PPBPBB","BPBPPB","PBPBBP",
"BBPPBP","PPBBPB","BBBBPBB","PPPPBPP","BPBPBB","PBPBPP"
];

/* toggle panel */
function toggle(){
 panel.style.display=panel.style.display==='block'?'none':'block';
}

/* init board */
function init(){
 grid=Array.from({length:ROWS},()=>Array(COLS).fill(null));
 drawBoard();
 updateWinrate();
}

/* draw roadmap */
function drawBoard(){
 board.innerHTML="";
 for(let r=0;r<ROWS;r++){
  for(let c=0;c<COLS;c++){
   let d=document.createElement("div");
   d.className="cell";
   d.id=`c-${r}-${c}`;
   board.appendChild(d);
}}}

/* update roadmap */
function render(){
 for(let r=0;r<ROWS;r++){
  for(let c=0;c<COLS;c++){
   let el=document.getElementById(`c-${r}-${c}`);
   el.className="cell"+(grid[r][c]?" "+grid[r][c]:"");
   el.innerText=grid[r][c]||"";
}}}

/* rebuild after delete */

function rebuild(){
 grid=Array.from({length:ROWS},()=>Array(COLS).fill(null));
 col=0;row=0;last=null;
 history.forEach(v=>place(v,true));
 updateWinrate();
}

/* place value in grid */

function place(v,skip){
 if(!skip){
  if(lastPrediction && v!=='T'){
   stats.total++;
   if(v===lastPrediction){
    stats.win++;
    memory[v]+=0.08;
   }else{
    memory[lastPrediction]-=0.04;
    if(memory[lastPrediction]<0.2) memory[lastPrediction]=0.2;
   }
   localStorage.setItem("memory",JSON.stringify(memory));
   localStorage.setItem("stats",JSON.stringify(stats));
  }
  history.push(v);
  localStorage.setItem("history",JSON.stringify(history));
 }

 if(last!==null){
  if(v===last && v!=='T'){
   if(row<ROWS-1) row++;
   else{col++;row=ROWS-1;}
  } else {col++;row=0;}
 }

 if(col>=COLS){
  for(let r=0;r<ROWS;r++){
   grid[r].shift();
   grid[r].push(null);
  }
  col=COLS-1;
 }

 grid[row][col]=v;
 last=v;
 render();
 updateWinrate();
}

/* add click */
function add(v){ place(v,false); }

/* delete last */
function deleteLast(){
 if(history.length===0) return;
 history.pop();
 rebuild();
}

/* reset all */
function resetAll(){
 history=[];
 memory={P:1,B:1};
 stats={win:0,total:0};
 localStorage.clear();
 rebuild();
 updateWinrate();
}

/* update winrate display */
function updateWinrate(){
 let rate = stats.total ? ((stats.win/stats.total)*100).toFixed(1) : 0;
 winrate.innerText="Winrate: "+rate+"% ("+stats.win+"/"+stats.total+")";
}

/* detect pattern */
function detectPattern(seq){
 let s=seq.slice(-10).join('');
 for(let p of PATTERNS){
  if(s.includes(p)) return p;
 }
 return null;
}

/* AI MODEL */

function runAI(){
 let clean=history.filter(x=>x!=='T');
 if(clean.length < 6){ alert("CẦN ≥6 KẾT QUẢ"); return; }

 let scoreP=50*memory.P;
 let scoreB=50*memory.B;

 /* 1. Simple trend */
 let pCount=clean.filter(x=>x==='P').length;
 let bCount=clean.filter(x=>x==='B').length;
 if(pCount > bCount) scoreP+=3;
 if(bCount > pCount) scoreB+=3;

 /* 2. Streak */
 let streak=1;
 for(let i=clean.length-2;i>=0;i--){
  if(clean[i]===clean.at(-1)) streak++;
  else break;
 }
 if(streak>=3 && streak<=5){
  clean.at(-1)==='P'?scoreP+=4:scoreB+=4;
 }
 if(streak>=6){
  clean.at(-1)==='P'?scoreB+=6:scoreP+=6;
 }

 /* 3. 1-1 pingpong */
 let ping=true;
 for(let i=1;i<clean.length;i++){
  if(clean[i]===clean[i-1]) ping=false;
 }
 if(ping){
  clean.at(-1)==='P'?scoreB+=5:scoreP+=5;
 }

 /* 4. Pattern */
 let pat=detectPattern(clean);
 if(pat){
  pat.at(-1)==='P'?scoreP+=5:scoreB+=5;
 }

 /* 5. Random small noise */
 scoreP += Math.random()*2-1;
 scoreB += Math.random()*2-1;

 let decision = scoreP>scoreB?'P':'B';
 lastPrediction = decision;

 let conf = Math.round(Math.max(scoreP,scoreB)/(scoreP+scoreB)*100);

 predict.innerText=(decision==='P'?'PLAYER ':'BANKER ')+conf+"%";
 circle.innerText=decision;
 circle.style.background=decision==='P'?'#2196f3':'#e53935';

 predict.classList.remove("flash");
 void predict.offsetWidth;
 predict.classList.add("flash");

 hP.style.width=(scoreP/(scoreP+scoreB)*100)+"%";
 hB.style.width=(scoreB/(scoreP+scoreB)*100)+"%";

 info.innerHTML=
 "Pattern: "+(pat||"Không rõ")+
 "<br>Streak: "+streak+
 "<br>P:"+pCount+" B:"+bCount+
 "<br>Mem P:"+memory.P.toFixed(2)+
 " B:"+memory.B.toFixed(2);
}

init();

</script>

</body>
</html>

